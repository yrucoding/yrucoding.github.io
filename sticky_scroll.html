<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sticky Scroll</title>
  <style>
    /* See https://www.paulirish.com/2012/box-sizing-border-box-ftw/ */
    html {
      box-sizing: border-box;
    }

    *, *:before, *:after {
      box-sizing: inherit;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    .main-content {
      line-height: 1.558;
      color: #000;
      font-size: 1.125rem;
    }

    .article-title {
      text-align: center;
      line-height: 1.2;
      font-size: 3.25rem;
      font-weight: 700;
    }

    .section-width {
      margin-left: auto;
      margin-right: auto;
      max-width: 90%;
    }

    #sections {
      width: 80%;
      min-width: 290px;
      max-width: 740px;
      margin: 0 auto;
    }

    .text-block {
      opacity: 1;
      background-color: #ffffff;
      background-color: rgba(255,255,255,.9);
      padding: 10px;
      border: 1px solid;
      margin-bottom: 90vh;
      position: relative;
      z-index: 10;
    }

    .copy-block {
      margin: 0.5rem auto 1.5rem;
    }

    .copy-width {
      margin-right: auto;
      margin-left: auto;
      max-width: 600px;
    }

    .slide {
      position: absolute;
      left: 50px;
      right: 50px;
    }

      .slide > img {
        width: 100%;
      }

    .fixed-image-holder-buffer {
      height: 10vh;
    }

    .fixed-image-holder {
      position: fixed;
      width: 100%;
      left: 0;
      top: 10vh;
      -webkit-transform:translateZ(1px);
      -moz-transform:translateZ(1px);
      -o-transform:translateZ(1px);
      transform:translateZ(1px);
      position: relative; 
      z-index: 1;
    }

    .hidden {
      visibility: hidden;
    }
  </style>
</head>
<body>
  <div class="main-content">
    <section class="section-width">
      <div class="copy-width copy-block">
        <h1 class="article-title">Here's How America Uses Its Land 1</h1>
      </div>
    </section>
    <section class="section-width">
      <div class="copy-width copy-block">
        <p>There are many statistical measures that show how productive the U.S. is. Its economy is the largest in the world and grew at a rate of 4.1 percent last quarter, its fastest pace since 2014. The unemployment rate is near the lowest mark in a half century.</p>
        <p>What can be harder to decipher is how Americans use their land to create wealth. The 48 contiguous states alone are a 1.9 billion-acre jigsaw puzzle of cities, farms, forests and pastures that Americans use to feed themselves, power their economy and extract value for business and pleasure.</p>
      </div>
    </section>
    <div id="sticky-start" class="fixed-image-holder-buffer"></div>
    <section class="section-width">
      <div id="graph-images-holder">
        <div id="graph-images">
          <div id="lead-image" class="slide"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Quilt-1-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Sectors-2-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Urban-3-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Urban-4-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Special-5-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Defense-6-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Crops-7-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Crops-8-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Crops-9-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Pasture-10-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Pasture-12-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Forest-13-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/Forest-14-medium.png"></div>
          <div class="slide hidden"><img src="https://www.bloomberg.com/graphics/2018-us-land-use/img/White-15-medium.png"></div>
        </div>
      </div>
      <div id="sections">
        <div class="text-block">Using surveys, satellite images and categorizations from various government agencies, the U.S. Department of Agriculture divides the U.S. into six major types of land. The data can't be pinpointed to a city block'each square on the map represents 250,000 acres of land. But piecing the data together state-by-state can give a general sense of how U.S. land is used.</div>
        <div class="text-block">Gathered together, cropland would take up more than a fifth of the 48 contiguous states. Pasture and rangeland would cover most of the Western U.S., and all of the country's cities and towns would fit neatly in the Northeast.</div>
        <div class="text-block">Even though urban areas make up just 3.6 percent of the total size of the 48 contiguous states, four in five Americans live, work and play there. With so much of the U.S. population in urban areas, it's little surprise that these areas contribute an outsize amount to the economy. The 10 most productive metropolitan areas alone contributed to about 40 percent of U.S. GDP in 2016.</div>
        <div class="text-block">The U.S. is becoming more urban at an average rate of about 1 million additional acres a year. That's the equivalent of adding new urban area the size of Los Angeles, Houston and Phoenix combined. U.S. urban areas have more than quadrupled since 1945.</div>
        <div class="text-block">The USDA categorizes national parks, wildlife areas, highways, railroads and military bases as special-use areas. And another USDA land classification miscellaneous includes cemeteries, golf courses, marshes, deserts and other areas of 'low economic value.'</div>
        <div class="text-block">More than 100 million acres of special-use areas are park and wilderness areas, where most commercial activities, such as logging, mining and grazing, are excluded.</div>
        <div class="text-block">Agricultural land takes up about a fifth of the country.</div>
        <div class="text-block">Yet the actual land area used to grow the food Americans eat is much smaller only about the size of Indiana, Illinois and half of Iowa combined. More than a third of the entire corn crop is devoted to ethanol production. Most cropland is used for livestock feed, exports or is left idle to let the land recover.</div>
        <div class="text-block">While the U.S. benefits from an overall agricultural trade surplus, Americans imported 15 percent of their food and beverage products in 2016. More than 30 percent of the fresh fruits and vegetables Americans consume come from other countries, predominantly Mexico and Canada. The amount of U.S. land used to produce citrus fruits alone is larger than Rhode Island.</div>
        <div class="text-block">More than one-third of U.S. land is used for pasture by far the largest land-use type in the contiguous 48 states. And nearly 25 percent of that land is administered by the federal government, with most occurring in the West. That land is open to grazing for a fee.</div>
        <div class="text-block">There's a single, major occupant on all this land: cows. Between pastures and cropland used to produce feed, 41 percent of U.S. land in the contiguous states revolves around livestock.</div>
        <div class="text-block">Forestland is the last major category of land categorized by the USDA. Unprotected forests and timberland constitute a quarter of the contiguous U.S.</div>
        <div class="text-block">According to the U.S. Forest Service, timber harvests typically occur on about 11 million acres each year. But because of regrowth, the volume of U.S. timber stock grew by about 1 percent annually from 2007 to 2012. Weyerhaeuser Co. is the largest private owner of timberlands in the U.S. With 12.4 million acres, the company controls 2.3 percent of all commercially available timber, an area nearly the size of West Virginia.</div>
        <div class="text-block">Putting all those pieces together, this map gives you a rough sense of all the ways U.S. land is used. Much of U.S. land serves specific purposes, such as the 2 million acres devoted to golf courses or the 3 million acres for airports.</div>
        <div class="text-block">On a percentage basis, urban creep outpaces growth in all other land-use categories. Another growth area: land owned by wealthy families. According to <span style="font-style: italic">The Land Report</span> magazine, since 2008 the amount of land owned by the 100 largest private landowners has grown from 28 million acres to 40 million, an area larger than the state of Florida.</div>
        <div class="text-block hidden"></div>
      </div>
    </section>
  </div>
  <script>
    (function () {
      var graphImagesHolder = document.getElementById("graph-images-holder");
      var graphImages = document.getElementById("graph-images");
      var stickyStart = document.getElementById("sticky-start");
      var leadImage = document.getElementById("lead-image");
      var sections = document.getElementById("sections");
      var slides = graphImages.querySelectorAll(".slide");
      var textBlocks = sections.querySelectorAll(".text-block");
      var textBlockTops = [];

      // Hide all the current slides.
      var currentTextBlockIndex = -1;
      var currentSlideIndex = -1;
      for (var i = 0 ; i < slides.length; i++) {
        slides[i].classList.add("hidden");
      }

      function getAbsoluteOffsetTop(element) {
        var result = 0;
        while (element != null) {
          result += element.offsetTop;
          element = element.offsetParent;
        }
        return result;
      }
      function getAbsoluteOffsetTops(nodes) {
        var tops = []
        for (var i = 0 ; i < nodes.length; i++) {
          tops.push(getAbsoluteOffsetTop(nodes[i]));
        }
        return tops;
      }
      function getViewportHeight() {
        return Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
      }

      var textBlockToSlideIndexMap = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 10, 11, 12, 13, 13]

      // Show the slide depending on the current text block that is in scope.
      function setCurrentSlideIndex(index) {
        if (currentSlideIndex === index) return;
        if (currentSlideIndex >= 0) {
          // Hide the current slide.
          slides[currentSlideIndex].classList.add("hidden");
        }
        currentSlideIndex = index;
        slides[currentSlideIndex].classList.remove("hidden");
      }
      function setCurrentTextBlock(index) {
        currentTextBlockIndex = index;
        setCurrentSlideIndex(textBlockToSlideIndexMap[currentTextBlockIndex]);
      }

      // Store the offsetTop that we should make the graph sticky.
      var stickyStartOffsetTop = getAbsoluteOffsetTop(stickyStart);

      function debounce(func, wait, immediate) {
        var timeout;
        return function () {
          var context = this, args = arguments;
          var later = function () {
            timeout = null;
            if (!immediate) func.apply(context, args);
          };
          var callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) func.apply(context, args);
        };
      }

      var onWindowScroll = debounce(function () {
        var scrollY = window.scrollY;
        var viewportHeight = getViewportHeight();
        var scrollYTopThreshold = scrollY + viewportHeight / 2.0;

        var textBlockIndex = 0;
        if (scrollY >= stickyStartOffsetTop) {
          graphImages.classList.add("fixed-image-holder");
          for (var i = 0; i < textBlockTops.length; i++) {
            textBlockIndex = i;
            if (scrollYTopThreshold <= textBlockTops[i]) {
              if (textBlockIndex > 0) { textBlockIndex--; }
              break;
            }
          }
        } else {
          graphImages.classList.remove("fixed-image-holder");
        }
        setCurrentTextBlock(textBlockIndex);
      }, 1);
      window.addEventListener("scroll", onWindowScroll);

      var onWindowResize = debounce(function() {
        // Since we might move the graphImages to position: fixed.
        // We need to make sure that its container has a height that we
        // keep the height the same.
        graphImagesHolder.style.height = leadImage.offsetHeight + "px";
        textBlockTops = getAbsoluteOffsetTops(textBlocks);
        stickyStartOffsetTop = getAbsoluteOffsetTop(stickyStart);
        onWindowScroll();
      }, 250);
      window.addEventListener("resize", onWindowResize);

      var isLoaded = false;
      window.onload = function () {
        if (isLoaded) return;
        isLoaded = true;
        onWindowResize();
      };
    })();
  </script>
</body>
</html>
